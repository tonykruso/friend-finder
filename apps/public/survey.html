<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>FriendFinder</title>
      
        <!-- Latest compiled and minified CSS & JS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
      
        <!-- Font Awesome Glyphicons -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
      
        <!-- Chosen -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
    </head>
    <body>
      <div class= "container">
        <div class= "jumbotron">
          <h1>Find your best match!</h1>
          <hr>
          <h2>find your match with the best compatibility</h2>
        </div>
      </div>
      <h2>Survey Questions!</h2>
      <hr>
      <h3>About You!</h3>
      <h4>Name (required)</h4>
      <input type = "text" name="" id="name" class="form-control" required>
      <!-- <h4>Link to photo image (required)</h4> -->
      <!-- <input type = "text" name="" id="photo" class="form-control" required> -->
      <hr>
      <h3><strong>QUESTION 1</strong></h3>
      <h4>You enjoy a challenge in everyday life:</h4>
      <select data-placeholder="" class="chosen-select" id="q1">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>QUESTION 2</strong></h3>
      <h4>You never make decisions that you later feel bad about:</h4>
      <select data-placeholder="" class="chosen-select" id="q2">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>QUESTION 3</strong></h3>
      <h4>The most important thing in your day to day life is to be and/or feel happy:</h4>
      <select data-placeholder="" class="chosen-select" id="q3">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>QUESTION 4</strong></h3>
      <h4>You will never break the law if it isn't absolutely necessary:</h4>
      <select data-placeholder="" class="chosen-select" id="q4">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>QUESTION 5</strong></h3>
      <h4>You think sports are an important part of our lives:</h4>
      <select data-placeholder="" class="chosen-select" id="q5">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>QUESTION 6</strong></h3>
      <h4>You enjoy spending time outdoors and with nature:</h4>
      <select data-placeholder="" class="chosen-select" id="q6">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>QUESTION 7</strong></h3>
      <h4>You enjoy experimenting with new foods and music and cultures:</h4>
      <select data-placeholder="" class="chosen-select" id="q7">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>QUESTION 8</strong></h3>
      <h4>Having a good sense of humor is an important human quality:</h4>
      <select data-placeholder="" class="chosen-select" id="q8">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>QUESTION 9</strong></h3>
      <h4>You think it's best to work very hard now so you can relax when you're older:</h4>
      <select data-placeholder="" class="chosen-select" id="q9">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>QUESTION 10</strong></h3>
      <h4>The best part of the day is when you get to crawl into bed:</h4>
      <select data-placeholder="" class="chosen-select" id="q10">
        <option value= ""></option>
        <option value= "1">1(Strongly disagree)</option>
        <option value= "2">2</option>
        <option value= "3">3</option>
        <option value= "4">4</option>
        <option value= "5">5 (Strongly Agree)</option>
      </select>

      <br>
      <br>

      <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i> Submit
      </button>

      <br>
      <br>

      <footer class="footer text-center">
        <div class="container">
          <p><a href="https://github.com/tonykruso/friend-finder"></a>
            <br> &copy; Tony "Money" Kruso 2019</p></p>
        </div>
      </footer>
      
<!-- Modal -->
      <div id="resultsModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
              <button type="button" class="close"  data-dismiss="modal">&times;</button>
              <h2 class="modal-title"><strong>Best Match</strong></h2>
            </div>
            <div class="modal-body">
              <h2 id="matchName"></h2>
              <img id="matchImg" src="https://via.placeholder.com/400x400"alt="Placeholder image in case user pic doesn't show">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>


      <!-- chosen CSS, basically copied from given example -->
      <script type="text/javascript">
      var config = {
        '.chosen-select': {},
        '.chosen-select-deselect':{
          // allow_single_deselect=true
        },
        '.chosen-select-no-single':{
          disable_search_threshold: 10
        },
        '.chosen-select-no-results':{
          no_results_text:'oops, nother found'
        },
        '.chosen-select-width':{
          width: "95%"
        }
      }
      for (var selector in config){
        $(selector).chosen(config[selector]);
      }
//captures the forms inputs
      $("#submit").on("click", function(){
        function validateForm(){
          var isValid=true;
          $('.form-control').each(function(){
            if ($(this).val() === '')
              isValid = false;
          });
          $('chosen-select').each(function(){
            if($(this).val()==="")
              isValid = false;
          })
          return isValid;
        }
//if all inputs are filled, validate response
        if (validateForm() == true){
          var userData = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: [$("#q1").val(),
            $("#q2").val(),
            $("#q3").val(),
            $("#q4").val(),
            $("#q5").val(),
            $("#q6").val(),
            $("#q7").val(),
            $("#q8").val(),
            $("#q9").val(),
            $("#q10").val(),
          ]
          }
          var currentURL = window.location.origin;
//ajax post to friendsapi
          $.post(currentURL + "/api/friends", userData, function(data){
            $("#matchName").text(data.name);
            $('#matchImg').attr("src", data.photo);
            $("#resultsModal").modal('toggle');
          });
        }else{
          alert("please fill out all fields before submitting");
        }
        return false;
      });
      </script>
    </body>
</html>